## Урок 4. Семинар. Механизмы контрольных групп
```bash
# установим утилиту для работы с cgroup
apt install cgroup-tools
# запускаем командную оболочку в изолироанной системе
unshare --fork --pid --mount-proc bash
ps aux
# создаем контрольную группу для ограничения ресурсов пользователю
# проверяем создание контрольной группы
cgcreate -a $USER -g memory:mytestgroup
ls /sys/fs/cgroup/
exit
# запустим новый процесс с использованием созданной контрольной групп
cgexec -g memory:mytestgroup bash
exit
# чтобы задать постоянный ip адрес контейнеру, созданному через lxc нужно изменить настройки конфигурации:
lxc.net.0.ipv4.address = 10.0.3.25/24
# выполнить команду в контейнере без захода в него
lxc-execute -n test123 /bin/ls
# создадим новый контейнер с использованием логфайла и запустим его
lxc-create -n test1 -t ubuntu --logfile /root/hw2.log
lxc-start -n test1 --logfile=/root/hw2.log --logpriority=NOTICE
# удаляем контейнер
lxc-destroy -n test1
```

### Домашнее задание
1. Запустить контейнер с ubuntu, используя механизм LXC.  
   Ограничить контейнер 256Мб ОЗУ и проверить, что ограничение работает.  
   Добавить автозапуск контейнеру, перезагрузить ОС и убедиться, что контейнер действительно запустился самотоятельно.  
   При создании указать файл, куда записывать логи.  
   После перезагрузки проанализировать логи.
2. Для желающих предлагается настроить автоматическую маршрутизацию между контейнерами.   
   Адреса можно взять 10.0.12.0/24 и 10.0.13.0/24